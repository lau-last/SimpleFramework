var w=class{static addEventToDocument(t,e){this.verifyListener(t,e)||(this.listeners.has(t)||(this.listeners.set(t,new Set),document.addEventListener(t,r=>this.dispatch(t,r))),this.pushListener(t,e))}static verifyListener(t,e){let r=this.listeners.get(t);return r?r.has(e):!1}static pushListener(t,e){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(e)}static dispatch(t,e){let r=this.listeners.get(t);if(r)for(let a of r)try{a(e)}catch(s){console.error(`[EventManager] Error in handler "${t}":`,s)}}};w.listeners=new Map;var i=w;var d=class n{constructor(){n.setupDelegation()}static setupDelegation(){n.registerExistingTriggers(),n.observeNewAjaxTriggers()}static registerExistingTriggers(t=document){t instanceof HTMLElement&&t.hasAttribute("data-ajax-trigger")&&n.ensureListenersFor(t.getAttribute("data-ajax-trigger"));let e=t.querySelectorAll("[data-ajax-trigger]");for(let r of e)n.ensureListenersFor(r.getAttribute("data-ajax-trigger"))}static observeNewAjaxTriggers(){new MutationObserver(e=>{for(let r of e)r.addedNodes.forEach(a=>{a instanceof HTMLElement&&n.registerExistingTriggers(a)})}).observe(document.body,{childList:!0,subtree:!0})}static shouldPreventDefault(t,e){return t==="submit"||t==="click"&&e.tagName==="A"}static createContext(t){let e=n.resolveAjaxUrl(t);if(!e?.url||!e?.method)return null;let r=n.resolveAjaxTarget(t),a=n.resolveAjaxSwap(t),s=n.buildFormData(t),o=n.resolveAjaxSelect(t);return{element:t,url:e.url,method:e.method,targetSelector:r,swapMode:a,formData:s,selectSelector:o}}static performAjax(t){return n.sendRequest(t.url,t.method,t.formData,t.element)}static onEvent(t){let e=t.target;if(!(e instanceof Element))return;let r=t.type,a=`[data-ajax-trigger="${r}"]`,s=e.closest(a);if(!s)return;n.shouldPreventDefault(r,s)&&t.preventDefault();let o=n.createContext(s);if(!o){console.warn("No AJAX URL/method resolved for:",s);return}n.emitEvent(s,"data-ajax:before-request",o),n.handleAjaxEvents(s,"data-ajax-event-before",o),n.performAjax(o).then(l=>{n.emitEvent(s,"data-ajax:on-success",o),n.handleAjaxEvents(s,"data-ajax-event-success",o);let c=n.getTargetElement(o.targetSelector,s),u=n.extractSelectedHtml(l,o.selectSelector);n.applySwap(c,u,o.swapMode)}).catch(()=>{n.emitEvent(s,"data-ajax:on-error",o),n.handleAjaxEvents(s,"data-ajax-event-error",o),console.error("AJAX error:",s);let l=n.getTargetElement(o.targetSelector,s);n.applySwap(l,'<p style="color:red;">Error while loading.</p>',o.swapMode)}).finally(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{n.emitEvent(s,"data-ajax:after-request",o),n.handleAjaxEvents(s,"data-ajax-event-after",o)})})})}static ensureListenersFor(t){t&&(t.includes(" ")||i.addEventToDocument(t,n.onEvent))}static resolveAjaxSwap(t){let e=t.getAttribute("data-ajax-swap");return e||"innerHTML"}static resolveAjaxPost(t){var e;return((e=t.closest("[data-ajax-post]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-post"))||null}static resolveAjaxGet(t){var e;return((e=t.closest("[data-ajax-get]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-get"))||null}static resolveAjaxUrl(t){let e=n.resolveAjaxPost(t),r=n.resolveAjaxGet(t);return!e&&!r?(console.warn("No data-ajax-post or data-ajax-get found for:",t),null):{url:e||r,method:e?"POST":"GET"}}static resolveAjaxTarget(t){var e;let r=(e=t.closest("[data-ajax-target]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-target");return r||console.warn("No data-ajax-target defined for:",t),r||null}static resolveAjaxSelect(t){var e;return((e=t.closest("[data-ajax-select]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-select"))||null}static resolveAjaxValue(t){var e;return((e=t.closest("[data-ajax-value]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-value"))||null}static extractSelectedHtml(t,e){if(!e)return t;try{let a=new DOMParser().parseFromString(t,"text/html").querySelector(e);return a?a.innerHTML:t}catch{return t}}static getTargetElement(t,e){if(t){let r=document.querySelector(t);if(r)return r;console.warn("Target not found for selector:",t,"\u2014 using source element instead.")}return e}static applySwap(t,e,r){switch(String(r||"innerHTML").toLowerCase()){case"inner":case"innerhtml":t.innerHTML=e;break;case"outer":case"outerhtml":case"replace":t.outerHTML=e;break;default:console.warn("Unknown swap mode:",r,"\u2014 falling back to innerHTML."),t.innerHTML=e}}static buildFormData(t){var e;let r=t.tagName==="FORM"?t:t.closest("form");if(r)return new FormData(r);let a=new FormData,s=t;return s.name&&a.append(s.name,(e=s.value)!==null&&e!==void 0?e:""),a}static buildRequestOptions(t){return{method:String(t||"GET").toUpperCase(),headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/html"}}}static prepareRequest(t,e,r,a){let s=n.buildRequestOptions(t),o=e,l=n.resolveAjaxValue(a);if(l)try{let c=JSON.parse(l.replace(/'/g,'"'));for(let[u,x]of Object.entries(c))r.append(u,x)}catch{}if(t==="GET"){let c=new URLSearchParams;for(let[u,x]of r.entries())c.append(u,x);o+=(o.includes("?")?"&":"?")+c.toString()}else s.body=r;return{finalUrl:o,options:s}}static sendRequest(t,e,r,a){let{finalUrl:s,options:o}=n.prepareRequest(e,t,r,a);return fetch(s,o).then(l=>{if(!l.ok)throw new Error("Server error: "+l.status);return l.text()})}static emitEvent(t,e,r={}){t.dispatchEvent(new CustomEvent(e,{detail:{...r},bubbles:!0}))}static handleAjaxEvents(t,e,r={}){var a;let s=t.hasAttribute(e)?t:(a=t.closest)===null||a===void 0?void 0:a.call(t,`[${e}]`);if(!s)return;let o=s.getAttribute(e);if(!o)return;let l=o.split(";").map(c=>c.trim()).filter(Boolean);for(let c of l)try{let u=window[c];typeof u=="function"?u(r,s):new Function("context","element",c)(r,s)}catch(u){console.error(`Error in ${e} -> "${c}"`,u)}}};var f=class n{constructor(){n.init()}static init(){i.addEventToDocument("animationend",n.onAnimationEnd),i.addEventToDocument("click",n.onClick)}static onAnimationEnd(t){let e=t.target;e&&e.matches('[data-js="alert"]')&&e.remove()}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;if(!e||!e.matches(".close"))return;let r=e.closest('[data-js="alert"]');r&&r.remove()}};var m=class n{constructor(){n.init()}static init(){i.addEventToDocument("click",n.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;e&&(n.handleClose(e),n.handleOpen(e))}static handleOpen(t){if(!t.matches('[data-js="aside"][data-target]'))return;let e=t.getAttribute("data-target");if(!e)return;let r=document.querySelector(e);r&&(n.isOpen(r)?n.hide(r):n.show(r))}static handleClose(t){if(!t.matches(".close"))return;let e=t.closest("aside, .sidebar");e&&n.isOpen(e)&&n.hide(e)}static isOpen(t){return t.classList.contains("show")}static show(t){t.classList.add("show");let e=n.getButtonForAside(t);e&&e.setAttribute("aria-expanded","true")}static hide(t){t.classList.remove("show");let e=n.getButtonForAside(t);e&&e.setAttribute("aria-expanded","false")}static getButtonForAside(t){let e=t.id;return e?document.querySelector(`[data-js="aside"][data-target="#${e}"]`):null}};var h=class n{constructor(){n.init()}static init(){i.addEventToDocument("click",n.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;if(!e)return;let r=e.closest('[data-js="collapse"][data-target]');r&&n.handleToggle(r)}static handleToggle(t){let e=t.getAttribute("data-target");if(!e)return;let r=document.querySelector(e);r&&n.toggle(r,t)}static toggle(t,e){if(n.isAnimating(t))return;let r=t.closest(".accordion");r&&n.handleTypeAccordion(r,t),t.classList.contains("show")?n.close(t,e):n.open(t,e)}static handleTypeAccordion(t,e){if(!t)return;t.getAttribute("data-type")!=="multiple"&&n.closeAllCollapses(t,e)}static closeAllCollapses(t,e){t.querySelectorAll(".accordion-body.show").forEach(a=>{if(a===e)return;let s=n.getButton(t,a);s&&n.close(a,s)})}static isAnimating(t){return t.dataset.animating==="true"}static open(t,e){e.setAttribute("aria-expanded","true"),t.dataset.animating="true",t.classList.add("show"),n.prepareOpenStyles(t);let r=t.scrollHeight;t.style.height="0px",t.offsetHeight;let a=n.playOpenAnimation(t,r);a.onfinish=()=>{t.style.height="auto",t.style.overflow="visible",n.cleanAnimationStyles(t)},a.oncancel=()=>{n.cleanAnimationStyles(t)}}static close(t,e){t.dataset.animating="true";let r=t.scrollHeight;n.prepareCloseStyles(t,r);let a=n.playCloseAnimation(t,r);a.onfinish=()=>{t.style.height="0px",t.classList.remove("show"),e.setAttribute("aria-expanded","false"),n.cleanAnimationStyles(t)},a.oncancel=()=>{n.cleanAnimationStyles(t)}}static prepareOpenStyles(t){t.style.overflow="hidden",t.style.height="auto"}static prepareCloseStyles(t,e){t.style.overflow="hidden",t.style.height=`${e}px`}static playOpenAnimation(t,e){return t.animate([{height:"0px"},{height:`${e}px`}],{duration:300,easing:"ease"})}static playCloseAnimation(t,e){return t.animate([{height:`${e}px`},{height:"0px"}],{duration:300,easing:"ease"})}static cleanAnimationStyles(t){["height","overflow"].forEach(r=>t.style.removeProperty(r)),t.style.length===0&&t.removeAttribute("style"),delete t.dataset.animating}static getButton(t,e){let r=e.id;return r?t.querySelector(`[data-js="collapse"][data-target="#${r}"]`):null}};var g=class n{constructor(){n.init()}static init(){i.addEventToDocument("click",n.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;e&&(n.handleSwitch(e)||n.handleClose(e)||n.handleOpen(e))}static handleSwitch(t){if(!t.matches('.close[data-js="dialog"][data-target]'))return!1;let e=t.getAttribute("data-target");if(!e)return!0;let r=document.querySelector(e);if(!(r instanceof HTMLDialogElement))return!0;let a=t.closest("dialog");return a&&a!==r?(a.addEventListener("transitionend",()=>n.open(r),{once:!0}),n.close(a),!0):(r.open||n.open(r),!0)}static handleClose(t){if(!t.matches(".close")||t.matches('[data-js="dialog"]'))return!1;let e=t.closest("dialog");return e&&n.close(e),!0}static handleOpen(t){if(!t.matches('[data-js="dialog"][data-target]')||t.matches(".close"))return!1;let e=t.getAttribute("data-target");if(!e)return!0;let r=document.querySelector(e);return r instanceof HTMLDialogElement&&(r.open||n.open(r)),!0}static open(t){n.emitEvent(t,"dialog:beforeOpen",t),t.showModal(),t.classList.add("show"),n.emitEvent(t,"dialog:afterOpen",t)}static close(t){n.emitEvent(t,"dialog:beforeClose",t),t.classList.remove("show"),t.addEventListener("transitionend",()=>{t.close()},{once:!0}),n.emitEvent(t,"dialog:afterClose",t)}static emitEvent(t,e,r){t.dispatchEvent(new CustomEvent(e,{detail:{element:r},bubbles:!0}))}};var p=class n{constructor(){n.init()}static init(){i.addEventToDocument("click",n.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;if(e){if(e.matches('[data-js="dropdown"][data-target]')){let r=e,a=r.getAttribute("data-target");if(!a)return;let s=document.querySelector(a);if(!s)return;n.closeAllDropdownsExcept(s),n.toggleDropdown(s,r);return}e.closest(".dropdown-body.show")||n.closeAllDropdowns()}}static toggleDropdown(t,e){n.isOpen(t)?n.closeDropdown(t,e):n.openDropdown(t,e)}static isOpen(t){return t.classList.contains("show")}static openDropdown(t,e){n.isOpen(t)||(t.style.display="block",t.offsetHeight,t.classList.add("show"),e.setAttribute("aria-expanded","true"))}static closeDropdown(t,e){if(!n.isOpen(t))return;t.classList.remove("show"),e.setAttribute("aria-expanded","false");let r=a=>{a.propertyName==="opacity"&&(t.style.display="none",t.removeEventListener("transitionend",r))};t.addEventListener("transitionend",r,{once:!0})}static closeAllDropdownsExcept(t){document.querySelectorAll(".dropdown-body.show").forEach(r=>{if(r!==t){let a=n.getButtonForDropdown(r);if(!a)return;n.closeDropdown(r,a)}})}static closeAllDropdowns(){document.querySelectorAll(".dropdown-body.show").forEach(e=>{let r=n.getButtonForDropdown(e);r&&n.closeDropdown(e,r)})}static getButtonForDropdown(t){let e=t.id;return e?document.querySelector(`[data-js="dropdown"][data-target="#${e}"]`):null}};var v=class n{constructor(){n.init()}static init(){i.addEventToDocument("submit",n.onSubmit)}static onSubmit(t){let e=t.target;if(!e)return;let r=e.closest("form");r&&r.matches('[data-js="validate"]')&&(r.checkValidity()||(t.preventDefault(),t.stopPropagation()),r.classList.add("validated"))}};var A=class n{constructor(){n.init()}static init(){i.addEventToDocument("click",n.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;e&&n.handleTabClick(e)}static handleTabClick(t){if(!t.matches('[data-js="tab"][data-target]'))return;let e=t.parentElement;if(!e)return;let r=n.resolveContent(t);r&&(n.hideAll(e),n.clearActive(e),n.showOne(t,r))}static resolveContent(t){let e=t.getAttribute("data-target");if(!e)return null;let r=document.querySelector(e);return r instanceof HTMLElement?r:null}static hideAll(t){t.querySelectorAll('[data-js="tab"][data-target]').forEach(r=>{let a=n.resolveContent(r);a&&a.classList.remove("show")})}static clearActive(t){t.querySelectorAll('[data-js="tab"][data-target]').forEach(r=>{r.classList.remove("active"),r.setAttribute("aria-selected","false")})}static showOne(t,e){t.classList.add("active"),t.setAttribute("aria-selected","true"),e.classList.add("show")}};document.addEventListener("DOMContentLoaded",()=>{new d,new f,new m,new h,new g,new p,new v,new A});
