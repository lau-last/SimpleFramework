var A=class{static addEventToDocument(t,e){this.verifyListener(t,e)||(this.listeners.has(t)||(this.listeners.set(t,new Set),document.addEventListener(t,n=>this.dispatch(t,n))),this.pushListener(t,e))}static verifyListener(t,e){let n=this.listeners.get(t);return n?n.has(e):!1}static pushListener(t,e){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(e)}static dispatch(t,e){let n=this.listeners.get(t);if(n)for(let s of n)try{s(e)}catch(a){console.error(`[EventManager] Error in handler "${t}":`,a)}}};A.listeners=new Map;var i=A;var d=class r{constructor(){r.setupDelegation()}static setupDelegation(){r.registerExistingTriggers(),r.observeNewAjaxTriggers()}static registerExistingTriggers(t=document){t instanceof HTMLElement&&t.hasAttribute("data-ajax-trigger")&&r.ensureListenersFor(t.getAttribute("data-ajax-trigger"));let e=t.querySelectorAll("[data-ajax-trigger]");for(let n of e)r.ensureListenersFor(n.getAttribute("data-ajax-trigger"))}static observeNewAjaxTriggers(){new MutationObserver(e=>{for(let n of e)n.addedNodes.forEach(s=>{s instanceof HTMLElement&&r.registerExistingTriggers(s)})}).observe(document.body,{childList:!0,subtree:!0})}static shouldPreventDefault(t,e){return t==="submit"||t==="click"&&e.tagName==="A"}static createContext(t){let e=r.resolveAjaxUrl(t);if(!e?.url||!e?.method)return null;let n=r.resolveAjaxTarget(t),s=r.resolveAjaxSwap(t),a=r.buildFormData(t),o=r.resolveAjaxSelect(t);return{element:t,url:e.url,method:e.method,targetSelector:n,swapMode:s,formData:a,selectSelector:o}}static performAjax(t){return r.sendRequest(t.url,t.method,t.formData,t.element)}static onEvent(t){let e=t.target;if(!(e instanceof Element))return;let n=t.type,s=`[data-ajax-trigger="${n}"]`,a=e.closest(s);if(!a)return;r.shouldPreventDefault(n,a)&&t.preventDefault();let o=r.createContext(a);if(!o){console.warn("No AJAX URL/method resolved for:",a);return}r.emitEvent(a,"data-ajax:before-request",o),r.handleAjaxEvents(a,"data-ajax-event-before",o),r.performAjax(o).then(c=>{r.emitEvent(a,"data-ajax:on-success",o),r.handleAjaxEvents(a,"data-ajax-event-success",o);let l=r.getTargetElement(o.targetSelector,a),u=r.extractSelectedHtml(c,o.selectSelector);r.applySwap(l,u,o.swapMode)}).catch(()=>{r.emitEvent(a,"data-ajax:on-error",o),r.handleAjaxEvents(a,"data-ajax-event-error",o),console.error("AJAX error:",a);let c=r.getTargetElement(o.targetSelector,a);r.applySwap(c,'<p style="color:red;">Error while loading.</p>',o.swapMode)}).finally(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.emitEvent(a,"data-ajax:after-request",o),r.handleAjaxEvents(a,"data-ajax-event-after",o)})})})}static ensureListenersFor(t){t&&(t.includes(" ")||i.addEventToDocument(t,r.onEvent))}static resolveAjaxSwap(t){let e=t.getAttribute("data-ajax-swap");return e||"innerHTML"}static resolveAjaxPost(t){var e;return((e=t.closest("[data-ajax-post]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-post"))||null}static resolveAjaxGet(t){var e;return((e=t.closest("[data-ajax-get]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-get"))||null}static resolveAjaxUrl(t){let e=r.resolveAjaxPost(t),n=r.resolveAjaxGet(t);return!e&&!n?(console.warn("No data-ajax-post or data-ajax-get found for:",t),null):{url:e||n,method:e?"POST":"GET"}}static resolveAjaxTarget(t){var e;let n=(e=t.closest("[data-ajax-target]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-target");return n||console.warn("No data-ajax-target defined for:",t),n||null}static resolveAjaxSelect(t){var e;return((e=t.closest("[data-ajax-select]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-select"))||null}static resolveAjaxValue(t){var e;return((e=t.closest("[data-ajax-value]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-value"))||null}static extractSelectedHtml(t,e){if(!e)return t;try{let s=new DOMParser().parseFromString(t,"text/html").querySelector(e);return s?s.innerHTML:t}catch{return t}}static getTargetElement(t,e){if(t){let n=document.querySelector(t);if(n)return n;console.warn("Target not found for selector:",t,"\u2014 using source element instead.")}return e}static applySwap(t,e,n){switch(String(n||"innerHTML").toLowerCase()){case"inner":case"innerhtml":t.innerHTML=e;break;case"outer":case"outerhtml":case"replace":t.outerHTML=e;break;default:console.warn("Unknown swap mode:",n,"\u2014 falling back to innerHTML."),t.innerHTML=e}}static buildFormData(t){var e;let n=t.tagName==="FORM"?t:t.closest("form");if(n)return new FormData(n);let s=new FormData,a=t;return a.name&&s.append(a.name,(e=a.value)!==null&&e!==void 0?e:""),s}static buildRequestOptions(t){return{method:String(t||"GET").toUpperCase(),headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/html"}}}static prepareRequest(t,e,n,s){let a=r.buildRequestOptions(t),o=e,c=r.resolveAjaxValue(s);if(c)try{let l=JSON.parse(c.replace(/'/g,'"'));for(let[u,w]of Object.entries(l))n.append(u,w)}catch{}if(t==="GET"){let l=new URLSearchParams;for(let[u,w]of n.entries())l.append(u,w);o+=(o.includes("?")?"&":"?")+l.toString()}else a.body=n;return{finalUrl:o,options:a}}static sendRequest(t,e,n,s){let{finalUrl:a,options:o}=r.prepareRequest(e,t,n,s);return fetch(a,o).then(c=>{if(!c.ok)throw new Error("Server error: "+c.status);return c.text()})}static emitEvent(t,e,n={}){t.dispatchEvent(new CustomEvent(e,{detail:{...n},bubbles:!0}))}static handleAjaxEvents(t,e,n={}){var s;let a=t.hasAttribute(e)?t:(s=t.closest)===null||s===void 0?void 0:s.call(t,`[${e}]`);if(!a)return;let o=a.getAttribute(e);if(!o)return;let c=o.split(";").map(l=>l.trim()).filter(Boolean);for(let l of c)try{let u=window[l];typeof u=="function"?u(n,a):new Function("context","element",l)(n,a)}catch(u){console.error(`Error in ${e} -> "${l}"`,u)}}};var f=class r{constructor(){r.init()}static init(){i.addEventToDocument("animationend",r.onAnimationEnd),i.addEventToDocument("click",r.onClick)}static onAnimationEnd(t){let e=t.target;if(!e)return;let n=e.closest('[data-js="alert"]');n&&n.remove()}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;if(!e)return;let n=e.closest(".close");if(!n)return;let s=n.closest('[data-js="alert"]');s&&s.remove()}};var g=class r{constructor(){r.init()}static init(){i.addEventToDocument("click",r.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;e&&(r.handleClose(e),r.handleOpen(e))}static handleOpen(t){let e=t.closest('[data-js="aside"][data-target]');if(!e)return;let n=e.getAttribute("data-target");if(!n)return;let s=document.querySelector(n);s&&(r.isOpen(s)?r.hide(s):r.show(s))}static handleClose(t){let e=t.closest(".close");if(!e)return;let n=e.closest("aside, .sidebar");n&&r.isOpen(n)&&r.hide(n)}static isOpen(t){return t.classList.contains("show")}static show(t){t.classList.add("show"),r.openTransition(t);let e=r.getButtonForAside(t);e&&e.setAttribute("aria-expanded","true")}static hide(t){t.classList.remove("show"),r.closeTransition(t);let e=r.getButtonForAside(t);e&&e.setAttribute("aria-expanded","false")}static getButtonForAside(t){let e=t.id;return e?document.querySelector(`[data-js="aside"][data-target="#${e}"]`):null}static openTransition(t){if(!t.classList.contains("shrink-left")&&!t.classList.contains("shrink-right"))return;let e=t.querySelectorAll(".side-item"),n=a=>{a.propertyName==="width"&&e.forEach(o=>{o.classList.add("open","fade-in")})},s=a=>{r.onWidthTransitionEndRemoveClass(a,e,"fade-in")};t.addEventListener("transitionstart",n,{once:!0}),t.addEventListener("transitionend",s,{once:!0})}static closeTransition(t){if(!t.classList.contains("shrink-left")&&!t.classList.contains("shrink-right"))return;let e=t.querySelectorAll(".side-item"),n=a=>{if(a.propertyName!=="width")return;let c=r.getAnimationDurationVar("--sidebar-transition-time")/2;e.forEach(l=>{let u=l;u.classList.add("fade-out-in"),setTimeout(()=>{u.classList.remove("open")},c)})},s=a=>{r.onWidthTransitionEndRemoveClass(a,e,"fade-out-in")};t.addEventListener("transitionstart",n,{once:!0}),t.addEventListener("transitionend",s,{once:!0})}static onWidthTransitionEndRemoveClass(t,e,n){t.propertyName==="width"&&e.forEach(s=>{let a=s;a.classList.remove(n),a.offsetWidth})}static getAnimationDurationVar(t){let e=getComputedStyle(document.documentElement).getPropertyValue(t).trim();return e.endsWith("ms")?parseFloat(e):e.endsWith("s")?parseFloat(e)*1e3:0}};var m=class r{constructor(){r.init()}static init(){i.addEventToDocument("click",r.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;if(!e)return;let n=e.closest('[data-js="collapse"][data-target]');n&&r.handleToggle(n)}static handleToggle(t){let e=t.getAttribute("data-target");if(!e)return;let n=document.querySelector(e);n&&r.toggle(n,t)}static toggle(t,e){if(r.isAnimating(t))return;let n=t.closest(".accordion");n&&r.handleTypeAccordion(n,t),t.classList.contains("show")?r.close(t,e):r.open(t,e)}static handleTypeAccordion(t,e){if(!t)return;t.getAttribute("data-type")!=="multiple"&&r.closeAllCollapses(t,e)}static closeAllCollapses(t,e){t.querySelectorAll(".accordion-body.show").forEach(s=>{if(s===e)return;let a=r.getButton(t,s);a&&r.close(s,a)})}static isAnimating(t){return t.dataset.animating==="true"}static open(t,e){e.setAttribute("aria-expanded","true"),t.dataset.animating="true",t.classList.add("show"),r.prepareOpenStyles(t);let n=t.scrollHeight;t.style.height="0px",t.offsetHeight;let s=r.playOpenAnimation(t,n);s.onfinish=()=>{t.style.height="auto",t.style.overflow="visible",r.cleanAnimationStyles(t)},s.oncancel=()=>{r.cleanAnimationStyles(t)}}static close(t,e){t.dataset.animating="true";let n=t.scrollHeight;r.prepareCloseStyles(t,n);let s=r.playCloseAnimation(t,n);s.onfinish=()=>{t.style.height="0px",t.classList.remove("show"),e.setAttribute("aria-expanded","false"),r.cleanAnimationStyles(t)},s.oncancel=()=>{r.cleanAnimationStyles(t)}}static prepareOpenStyles(t){t.style.overflow="hidden",t.style.height="auto"}static prepareCloseStyles(t,e){t.style.overflow="hidden",t.style.height=`${e}px`}static playOpenAnimation(t,e){return t.animate([{height:"0px"},{height:`${e}px`}],{duration:300,easing:"ease"})}static playCloseAnimation(t,e){return t.animate([{height:`${e}px`},{height:"0px"}],{duration:300,easing:"ease"})}static cleanAnimationStyles(t){["height","overflow"].forEach(n=>t.style.removeProperty(n)),t.style.length===0&&t.removeAttribute("style"),delete t.dataset.animating}static getButton(t,e){let n=e.id;return n?t.querySelector(`[data-js="collapse"][data-target="#${n}"]`):null}};var h=class r{constructor(){r.init()}static init(){i.addEventToDocument("click",r.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;e&&(r.handleSwitch(e)||r.handleClose(e)||r.handleOpen(e))}static handleSwitch(t){let e=t.closest('.close[data-js="dialog"][data-target]');if(!e)return!1;let n=e.getAttribute("data-target");if(!n)return!0;let s=document.querySelector(n);if(!(s instanceof HTMLDialogElement))return!0;let a=t.closest("dialog");return a&&a!==s?(a.addEventListener("transitionend",()=>r.open(s),{once:!0}),r.close(a),!0):(s.open||r.open(s),!0)}static handleClose(t){let e=t.closest(".close");if(!e||e.matches('[data-js="dialog"]'))return!1;let n=e.closest("dialog");return n&&r.close(n),!0}static handleOpen(t){let e=t.closest('[data-js="dialog"][data-target]');if(!e||e.closest(".close"))return!1;let n=e.getAttribute("data-target");if(!n)return!0;let s=document.querySelector(n);return s instanceof HTMLDialogElement&&(s.open||r.open(s)),!0}static open(t){r.emitEvent(t,"dialog:beforeOpen",t),t.showModal(),t.classList.add("show"),r.emitEvent(t,"dialog:afterOpen",t)}static close(t){r.emitEvent(t,"dialog:beforeClose",t),t.classList.remove("show"),t.addEventListener("transitionend",()=>{t.close()},{once:!0}),r.emitEvent(t,"dialog:afterClose",t)}static emitEvent(t,e,n){t.dispatchEvent(new CustomEvent(e,{detail:{element:n},bubbles:!0}))}};var p=class r{constructor(){r.init()}static init(){i.addEventToDocument("click",r.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;if(!e)return;let n=e.closest('[data-js="dropdown"][data-target]');if(n){let s=n.getAttribute("data-target");if(!s)return;let a=document.querySelector(s);if(!a)return;r.closeAllDropdownsExcept(a),r.toggleDropdown(a,n);return}e.closest(".dropdown-body.show")||r.closeAllDropdowns()}static toggleDropdown(t,e){r.isOpen(t)?r.closeDropdown(t,e):r.openDropdown(t,e)}static isOpen(t){return t.classList.contains("show")}static openDropdown(t,e){r.isOpen(t)||(t.style.display="block",t.offsetHeight,t.classList.add("show"),e.setAttribute("aria-expanded","true"))}static closeDropdown(t,e){if(!r.isOpen(t))return;t.classList.remove("show"),e.setAttribute("aria-expanded","false");let n=s=>{s.propertyName==="opacity"&&(t.style.display="none",t.removeEventListener("transitionend",n))};t.addEventListener("transitionend",n,{once:!0})}static closeAllDropdownsExcept(t){document.querySelectorAll(".dropdown-body.show").forEach(n=>{if(n!==t){let s=r.getButtonForDropdown(n);if(!s)return;r.closeDropdown(n,s)}})}static closeAllDropdowns(){document.querySelectorAll(".dropdown-body.show").forEach(e=>{let n=r.getButtonForDropdown(e);n&&r.closeDropdown(e,n)})}static getButtonForDropdown(t){let e=t.id;return e?document.querySelector(`[data-js="dropdown"][data-target="#${e}"]`):null}};var v=class r{constructor(){r.init()}static init(){i.addEventToDocument("submit",r.onSubmit)}static onSubmit(t){let e=t.target;if(!e)return;let n=e.closest("form");n&&n.matches('[data-js="validate"]')&&(n.checkValidity()||(t.preventDefault(),t.stopPropagation()),n.classList.add("validated"))}};var E=class r{constructor(){r.init()}static init(){i.addEventToDocument("click",r.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;e&&r.handleTabClick(e)}static handleTabClick(t){let e=t.closest('[data-js="tab"][data-target]');if(!e)return;let n=e.parentElement;if(!n)return;let s=r.resolveContent(e);s&&(r.hideAll(n),r.clearActive(n),r.showOne(e,s))}static resolveContent(t){let e=t.getAttribute("data-target");if(!e)return null;let n=document.querySelector(e);return n instanceof HTMLElement?n:null}static hideAll(t){t.querySelectorAll('[data-js="tab"][data-target]').forEach(n=>{let s=r.resolveContent(n);s&&s.classList.remove("show")})}static clearActive(t){t.querySelectorAll('[data-js="tab"][data-target]').forEach(n=>{n.classList.remove("active"),n.setAttribute("aria-selected","false")})}static showOne(t,e){t.classList.add("active"),t.setAttribute("aria-selected","true"),e.classList.add("show")}};document.addEventListener("DOMContentLoaded",()=>{new d,new f,new g,new m,new h,new p,new v,new E});
